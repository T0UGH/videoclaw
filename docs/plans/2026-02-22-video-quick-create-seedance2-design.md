# video-quick-create 改造设计 - 全面拥抱 Seedance 2.0

> **Date:** 2026-02-22

## 概述

改造 video-quick-create 工作流，全面适配 Seedance 2.0 的多模态输入能力和结构化提示词格式。

## 目标

1. 提示词格式改为 Seedance 2.0 结构化格式
2. i2v 支持多图 + 视频 + 音频输入
3. 流程优化：先故事大纲 → 再按需准备素材

## 流程设计

```
1. 故事大纲
   - 用户描述视频想法
   - AI 整理为简化版：视频主题 + 核心剧情 + 角色设定 + 时长

2. 素材准备
   - AI 推断需要哪些素材，列出清单
   - 用户确认/补充/修改
   - 素材处理：
     * 角色：用户提供 / T2I / I2I
     * 场景：用户提供 / T2I / I2I（可选）
   - 参考素材确认：
     * 视频参考（运镜/动作）：可选
     * 音频参考（配乐/对白）：可选

3. 文本分镜
   - 生成 Seedance 2.0 格式提示词
   - 用户确认/修改

4. i2v 生成视频
   - 输入：角色图 + 场景图(可选) + 视频参考(可选) + 音频参考(可选) + 文本分镜
   - 调用 Seedance 2.0 生成视频
```

## Seedance 2.0 提示词格式

```
【风格】_____风格，_____秒，_____比例，_____氛围

【时间轴】
0-X秒：[镜头] + [画面] + [动作] + [特效]
X-Y秒：[镜头] + [画面] + [动作] + [特效]
...

【声音】_____配乐 + _____音效 + _____对白

【参考】@图片1 _____，@图片2 _____，@视频1 _____，@音频1 _____
```

### 引用语法

| 类型 | 语法 | 说明 |
|------|------|------|
| 图片 | @图片1, @图片2 | 角色图、场景图等 |
| 视频 | @视频1 | 运镜/动作参考 |
| 音频 | @音频1 | 配乐/对白参考 |

## 技术改动

### 1. video-quick-create skill 重写

- 改造为 4 步流程
- 故事大纲生成
- 素材需求推断和确认
- Seedance 2.0 格式分镜生成

### 2. i2v 命令增强

支持多模态输入：

```bash
videoclaw i2v -p <project> \
  -i <角色图> \
  -i <场景图> \
  --video-ref <参考视频> \
  --audio-ref <参考音频> \
  -t "<Seedance 2.0 格式提示词>"
```

参数说明：
- `-i/--image`: 图片输入，可多个（角色、场景）
- `--video-ref`: 视频参考（运镜/动作）
- `--audio-ref`: 音频参考（配乐/对白）
- `-t/--prompt`: Seedance 2.0 格式提示词

### 3. 模型后端改造

扩展 `VolcEngineSeedance` 类支持 omni_reference 模式：
- 多图输入（最多 9 张）
- 视频输入（最多 3 个）
- 音频输入（最多 3 个）

## 数据流

```
用户输入
    │
    ▼
┌─────────────────┐
│ 1. 故事大纲    │ ← 用户描述
└─────────────────┘
    │
    ▼
┌─────────────────┐
│ 2. 素材准备    │ ← 推断需求 → 用户确认 → 素材处理
│  - 角色图      │
│  - 场景图(可选)│
│  - 视频参考   │
│  - 音频参考   │
└─────────────────┘
    │
    ▼
┌─────────────────┐
│ 3. 文本分镜    │ ← Seedance 2.0 格式
└─────────────────┘
    │
    ▼
┌─────────────────┐
│ 4. i2v 生成    │ ← 调用 Seedance 2.0
└─────────────────┘
    │
    ▼
   视频输出
```

## 待定细节

- [ ] 故事大纲的 prompt 模板
- [ ] 素材需求推断的 prompt 模板
- [ ] 是否需要新的 CLI 命令（story-outline？）

### 故事大纲 prompt 模板

用户描述视频想法后，使用以下 prompt 生成故事大纲：

```
你是一个专业的视频策划专家。请根据用户的想法生成一个简化的故事大纲。

用户想法：<用户输入>

请生成以下格式的故事大纲：

【视频主题】一句话概括视频核心内容

【核心剧情】2-3句话描述视频的主要情节

【角色设定】
- 角色1：描述（包括外貌、性格）
- 角色2：描述
（如果没有明确角色，可省略）

【时长】X秒（默认15秒）

【风格偏好】用户指定的风格，如果没有则留空
```

---

## 详细设计（参考 seedance2-skill 和 make-prompt-seedance2）

### Seedance 2.0 输入限制

| 输入类型 | 数量上限 | 支持格式 | 大小限制 |
|---|---|---|---|
| 图片 | ≤ 9 张 | jpeg、png、webp、bmp、tiff、gif | 每张 < 30 MB |
| 视频 | ≤ 3 个 | mp4、mov | 每个 < 50 MB，总时长 2–15s |
| 音频 | ≤ 3 个 | mp3、wav | 每个 < 15 MB，总时长 ≤ 15s |
| **总文件数** | **≤ 12 个** | — | — |

### @ 引用语法

```
@图片1    @图片2    @图片3   ...
@视频1    @视频2    @视频3
@音频1    @音频2    @音频3
```

### 提示词公式

```
【风格】_____风格，_____秒，_____比例，_____氛围

【时间轴】
0-X秒：[镜头] + [画面] + [动作] + [特效]
X-Y秒：[镜头] + [画面] + [动作] + [特效]
...

【声音】_____配乐 + _____音效 + _____对白

【参考】@图片1 _____，@图片2 _____，@视频1 _____，@音频1 _____
```

### 素材用途指定

| 用途 | 语法 |
|---|---|
| 首帧 | `@图片1 作为首帧` |
| 尾帧 | `@图片2 作为尾帧` |
| 人物形象 | `参考 @图片1 的人物形象` |
| 场景/背景 | `场景参考 @图片3` |
| 运镜 | `参考 @视频1 的运镜效果` |
| 动作 | `参考 @视频1 的动作编排` |
| 背景音乐 | `背景BGM参考 @音频1` |
| 音效 | `音效参考 @视频3 的音效` |
